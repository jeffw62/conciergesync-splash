<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ConciergeSync™ — Sign in</title>
<style>
  :root { --ui: 4000; }
  * { box-sizing: border-box; }
  html, body { height:100%; }
  body {
    margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    background: radial-gradient(1200px 600px at 50% -20%, #2a3140 0%, #0b0f14 70%);
    color:#e8eef7; display:grid; place-items:center;
  }
  .card {
    width:min(560px, 92vw);
    background: rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.14);
    border-radius:16px; padding:24px 22px;
    backdrop-filter: blur(10px) saturate(1.15);
    box-shadow: 0 12px 42px rgba(0,0,0,.35);
  }
  h1 { margin:0 0 6px; font-size:28px; }
  p { margin:0 0 18px; color:#b8c4d6; }
  .row { display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
  .btn {
    padding:12px 16px; border-radius:12px; cursor:pointer; font-weight:800;
    border:1px solid rgba(255,255,255,.55); background:transparent; color:#fff;
  }
  .btn.primary { background:#fff; color:#111; border-color:#fff; }
  .fine { font-size:12px; color:#9fb0c8; margin-top:10px; }
  .notice {
    padding:8px 10px; border-radius:10px; background:rgba(0,0,0,.35);
    border:1px solid rgba(255,255,255,.12); margin-bottom:12px; color:#dfe8f6;
  }
</style>
</head>
<body>
  <div class="card" role="dialog" aria-modal="true">
    <h1>Sign in to ConciergeSync™</h1>
    <p>Welcome back. Continue to your console.</p>
    <div id="logoutNotice" class="notice" style="display:none;">You’ve been logged out.</div>
    <div class="row">
      <button id="signin" class="btn primary">Enter Console</button>
      <button id="learn" class="btn">What is ConciergeSync?</button>
    </div>
    <div class="fine">No bank logins required.</div>
  </div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);

  function clearAuth(){
    try{
      sessionStorage.removeItem('cs_authed');
      localStorage.removeItem('cs_authed');
      localStorage.removeItem('cs_uid');
      localStorage.removeItem('cs_email');
      localStorage.removeItem('cs_onboarding_done');
      localStorage.removeItem('cs_bg_src');
      localStorage.removeItem('last_bg_idx');
      document.cookie = 'cs_auth=; Max-Age=0; path=/; SameSite=Lax';
    }catch(_){}
  }

  // If we arrived with ?logout=1, do NOT auto-redirect. Re-clear everything.
  if (qs.get('logout') === '1') {
    clearAuth();
    document.getElementById('logoutNotice').style.display = 'block';
  } else {
    // Optional: if still fully authed, allow auto-forward.
    const hasCookie = /(?:^|;\s*)cs_auth=1(?:;|$)/.test(document.cookie);
    const hasStorage = (localStorage.getItem('cs_authed') === '1' || sessionStorage.getItem('cs_authed') === '1');
    if (hasCookie || hasStorage) {
      // Already signed in → go straight to the console landing (splash)
      location.replace('/beta/01-index.html?enter=1');
      return;
    }
  }

  // Primary sign-in button: mark authed and proceed to console splash
  document.getElementById('signin').addEventListener('click', function(e){
    e.preventDefault();
    try{
      sessionStorage.setItem('cs_authed','1');
      localStorage.setItem('cs_authed','1');
      document.cookie = 'cs_auth=1; Max-Age=7200; path=/; SameSite=Lax';
    }catch(_){}
    location.assign('/beta/01-index.html?enter=1');
  });

  // Secondary button can route to marketing or docs (placeholder)
  document.getElementById('learn').addEventListener('click', function(e){
    e.preventDefault();
    alert('ConciergeSync™ helps you earn, manage, and redeem travel rewards with clarity.');
  });
})();
</script>
</body>
</html>
