<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Join the ConciergeSyncâ„¢ Beta</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --card-bg:#ffffff;
      --bg:#f7f7f7;
      --text:#0f172a;
      --muted:#64748b;
      --primary:#0b3b9e; /* deep blue */
      --primary-dk:#0a2f7c;
      --success:#16a34a;
      --warning:#ca8a04;
      --danger:#dc2626;
      --border:#e5e7eb;
      --radius:16px;
      --shadow:0 10px 30px rgba(2,6,23,.08);
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue",
                   Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    }
    .wrap{
      max-width:760px; margin:40px auto; padding:0 16px;
    }
    .card{
      background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:28px 28px 24px;
    }
    h1{
      font-size:32px; margin:4px 0 8px; text-align:left;
    }
    .sub{
      color:var(--muted); margin:0 0 18px; font-size:18px;
    }
    .badges{ display:flex; gap:12px; align-items:center; margin:4px 0 24px; flex-wrap:wrap;}
    .badge{ font-size:14px; padding:6px 10px; border-radius:999px; background:#eef2ff; border:1px solid #e2e8f0; display:flex; align-items:center; gap:6px;}
    form{ display:grid; gap:16px; }
    label{ font-weight:600; }
    input, textarea{
      width:100%; border:1px solid var(--border); border-radius:10px; padding:12px 14px; font-size:16px;
      background:#fff; outline:none;
    }
    textarea{ min-height:140px; resize:vertical; }
    input:focus, textarea:focus{ border-color:#cbd5e1; box-shadow:0 0 0 3px rgba(59,130,246,.15);}
    .row{ display:grid; grid-template-columns:1fr 1fr; gap:16px;}
    @media (max-width:640px){ .row{ grid-template-columns:1fr; } }

    .hint{ font-size:13px; color:var(--muted); margin-top:2px;}
    .actions{ margin-top:6px; display:flex; flex-direction:column; gap:10px; }
    .btn{
      border:none; border-radius:10px; padding:14px 18px; font-size:16px; font-weight:600;
      background:var(--primary); color:#fff; cursor:pointer;
    }
    .btn:hover{ background:var(--primary-dk); }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }
    .fine{ font-size:12px; color:var(--muted); }

    .alert{
      margin-top:8px; padding:12px 14px; border-radius:10px; background:#fee2e2; color:var(--danger);
      border:1px solid #fecaca; display:none;
    }
    .alert.show{ display:block; }

    .footer{
      text-align:center; color:var(--muted); font-size:14px; margin-top:16px;
    }
    .footer a{ color:var(--primary); text-decoration:none; }
    .footer a:hover{ text-decoration:underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Join the ConciergeSyncâ„¢ Beta</h1>
      <p class="sub">Answer three quick questions to get on the Beta Interest List.</p>

      <div class="badges">
        <span class="badge">âœ… Takes under 2 minutes</span>
        <span class="badge">ðŸ”’ Your info stays private</span>
        <span class="badge">ðŸ’Ž Beta gets lifetime access</span>
      </div>

      <form id="betaForm" novalidate>
        <div class="row">
          <div>
            <label for="name">First / Last Name</label>
            <input id="name" name="name" type="text" autocomplete="name" required />
          </div>
          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" autocomplete="email" required />
          </div>
        </div>

        <div>
          <label for="message">What frustrates you about travel right now; what would you want ConciergeSyncâ„¢ to do for you?</label>
          <textarea id="message" name="message" required></textarea>
          <div class="hint">Required. A sentence or two is great.</div>
        </div>

        <div class="actions">
          <button class="btn" id="submitBtn" type="submit">Join the Beta Interest List</button>
          <div class="fine">By submitting, you agree to be contacted about the beta. No spam, ever.</div>
          <div id="errorBar" class="alert">Submission failed. Please try again.</div>
        </div>
      </form>
    </div>

    <div class="footer">
      Questions? Email <a href="mailto:hello@conciergesync.ai">hello@conciergesync.ai</a>
    </div>
  </div>

  <script>
    // === Configure this ===
    const ENDPOINT_URL = "https://portal.conciergesync.ai/api/beta-interest";

    const REDIRECT_SUCCESS = "04-intake-thank-you.html";
    const REDIRECT_IF_POST_FAILS = false; // set to true temporarily for demos
    const form = document.getElementById("betaForm");
    const btn  = document.getElementById("submitBtn");
    const err  = document.getElementById("errorBar");

    function validEmail(v){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      err.classList.remove("show");

      const name = (document.getElementById("name").value || "").trim();
      const email = (document.getElementById("email").value || "").trim();
      const message = (document.getElementById("message").value || "").trim();

      // Client-side validation (Q3 required)
      if(!name || !email || !message || !validEmail(email)){
        err.textContent = "Please complete all fields with a valid email.";
        err.classList.add("show");
        return;
      }

      btn.disabled = true;
      btn.textContent = "Submittingâ€¦";

      try{
        const payload = { name, email, message, source: "beta-landing" };

        const resp = await fetch(ENDPOINT_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        if(resp.ok){
          window.location.href = REDIRECT_SUCCESS;
          return;
        }
        throw new Error("Non-200 status");
      }catch(_){
        if(REDIRECT_IF_POST_FAILS){
          window.location.href = REDIRECT_SUCCESS;
          return;
        }
        err.textContent = "Submission failed. Please try again.";
        err.classList.add("show");
        btn.disabled = false;
        btn.textContent = "Join the Beta Interest List";
      }
    });
  </script>
</body>
</html>
