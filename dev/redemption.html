<script>
  // Example dataset (later: this comes from seats.aero, Amadeus, etc.)
  const redemptions = [
    { route: "DFW → LHR", program: "AA", points: 57500, cashFare: 7950, fees: 737 },
    { route: "CUN → DFW", program: "Avios", points: 12000, cashFare: 540, fees: 90 },
    { route: "LAS → JFK", program: "JetBlue", points: 15000, cashFare: 585, fees: 30 }
  ];

  // Calculate CPM = (Cash Fare - Fees) / Points
  redemptions.forEach(r => {
    r.cpm = ((r.cashFare - r.fees) / r.points).toFixed(2);
  });

  // Render table rows dynamically
  function renderTable() {
    const tbody = document.querySelector("tbody");
    tbody.innerHTML = "";
    redemptions.forEach(r => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${r.route}</td>
        <td>${r.program}</td>
        <td>${r.points.toLocaleString()}</td>
        <td>$${r.cashFare.toLocaleString()}</td>
        <td><strong>${r.cpm}¢</strong></td>
        <td><button class="btn">Book</button></td>
      `;
      tbody.appendChild(tr);
    });

    // Highlight best option (highest CPM for now)
    const best = redemptions.reduce((a, b) => (parseFloat(a.cpm) > parseFloat(b.cpm) ? a : b));
    const rows = tbody.querySelectorAll("tr");
    rows.forEach(row => {
      if (row.children[0].innerText === best.route) {
        row.classList.add("highlight");
      }
    });
  }

  renderTable();
</script>
